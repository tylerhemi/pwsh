$cred = Import-Clixml C:\temp\creds.xml
$AllDomainControllers = Get-ADComputer -LDAPFilter "(&(objectCategory=computer)(userAccountControl:1.2.840.113556.1.4.803:=8192))"
ForEach ($DC in $AllDomainControllers)
{
    $DCServer = $DC.name
    write-host "Configuring DNS service on $($DCServer)" -ForegroundColor Green
    Invoke-Command -ComputerName $DCServer -Credential $cred -Command {
            If ((Get-ItemProperty -Path 'HKLM:SYSTEM\CurrentControlSet\Services\DNS\Parameters' -Name 'TcpReceivePacketSize' -ErrorAction SilentlyContinue).TcpReceivePacketSize -ne '65280') {
            Write-Host "Setting Registry Key" -ForegroundColor Yellow
            Set-Itemproperty -path 'HKLM:SYSTEM\CurrentControlSet\Services\DNS\Parameters' -Name 'TcpReceivePacketSize' -value '65280' -Type DWord
            }
            Get-Service DNS | Restart-Service -PassThru
        }
   }